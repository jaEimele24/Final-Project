from ggame import App, RectangleAsset, ImageAsset, SoundAsset
from ggame import LineStyle, Color, Sprite, Sound, Frame
import math, random
from time import time
civname=input("enter your civilization's name here: ")


class CivGame(App):
    def __init__(self):
        super().__init__()
        black = Color(0x458B00,1)
        noline = LineStyle(0, black)
        bg_asset = RectangleAsset(self.width, self.height, noline, black)
        bg = Sprite(bg_asset, (0,0))
        self.farmland=float(input("enter the initial amount of airable land here: "))
        self.forests=float(input("enter the initial amount of forests here: "))
        self.k=0
        self.metaldeposits=float(input("enter the amount of usable metals deposits there are: "))
        self.initialtechlevel=input("enter the initial tech level here, either ancient, classical, mideval, renessance, industrial, modern, or future: ")
        pop=float(input("enter the initial population here,  at least 10 is optimal: "))
        self.techlevel="Ancient"
        self.pop=Population(pop, self.farmland, self.k, self.forests, self.initialtechlevel, self.metaldeposits, self.techlevel)
    def step(self):
        self.pop.step()
#Population Dynamics
class Population:
    def __init__(self, pop, farmland, k, forests, initialtechlevel, metaldeposits, techlevel):
        self.pop=pop
        self.farmland=farmland
        self.k=k
        self.forests=forests
        self.initialtechlevel=initialtechlevel
        self.metaldeposits=metaldeposits
        self.techlevel=techlevel
        self.techadvanceprogress=0
        self.houses=0
    def step(self):
        self.k=self.k+1
        if self.k==1:
            if self.initialtechlevel=="ancient" and self.techlevel=="Ancient":
                labor=self.pop
                woodcutters=.1*labor
                builders=.8*labor
                farmers=.8*labor
                if self.forests>0:
                    wood=woodcutters*.1*self.forests
                    self.forests=self.forests-(wood*.5)
                if self.forests==0 or self.forests<0:
                    wood=0
                newhouses=.5*wood*builders
                self.houses=self.houses+newhouses
                fooduse=self.pop
                if (self.pop*.2)<self.farmland:
                    food=self.farmland*.9*farmers
                if (self.pop*.2)>self.farmland:
                    food=self.pop*.8*farmers
                housecap=self.houses
                foodcap=food
                if self.pop<foodcap and self.pop<housecap:
                    self.pop=self.pop+(.2*(self.pop))
                elif self.pop>foodcap:
                    self.pop=self.pop-(self.pop-foodcap)
                else: 
                    self.pop=self.pop
                g=self.pop
                inventors=random.randint(1,10)*(.01*self.pop)+(.0005*(food-fooduse))
                techadvancechance=0
                print("The housecap of your civilization is {0}".format((housecap)))
                print("The population of your civilization is {0}".format(round(g, 0)))
                print("The food output of your civilization is {0}".format(round(food,0)))
                print("The food use of your civilization is {0}".format(round(fooduse,0)))
                if self.initialtechlevel=="ancient" and inventors>10:
                    techadvancechance=random.randint(0,10)*inventors*.2
                    self.techadvanceprogress=self.techadvanceprogress+.025*(techadvancechance)
                    print(self.techadvanceprogress)
                    if self.techadvanceprogress>=10:
                        print("eureka")
                        self.techlevel="classical"
            """
            if self.techlevel=="classical":
                labor=self.pop
                miners=.04*self.labor
                smelters=.005*self.labor
                forgers=.005*self.labor
                farmers=.8*self.labor
                builders=.075*self.labor
                woodcutters=.075*self.labor
                if self.forests>0:
                    wood=woodcutters*.15*self.forests
                    self.forests=self.forests-(wood*.5)
                if self.forests==0 or self.forests<0:
                    wood=0
                newhouses=wood*builders
                self.houses=self.houses+newhouses
                fooduse=4*farmers
                if (self.pop*.18)<self.farmland:
                    food=self.farmland*farmers-fooduse
                if (self.pop*.18)>self.farmland:
                    food=5*farmers-fooduse
                housecap=self.houses
                foodcap=food
                if self.pop<foodcap and self.pop<housecap:
                    self.pop=self.pop+(.2*(self.pop))
                elif self.pop>foodcap:
                    self.pop=selfpop-(self.pop-foodcap)
                else: 
                    self.pop=self.pop
                g=self.pop
                inventors=random.randint(1,10)*(.01*self.pop)+(.0005*(food-fooduse))
                techadvancechance=0
                print("The housecap of your civilization is {0}".format((housecap)))
                print("The population of your civilization is {0}".format(round(g, 0)))
                print("The food output of your civilization is {0}".format(round(food,0)))
                print("The food use of your civilization is {0}".format(round(fooduse,0)))
                """
                    
                    
                    

            self.k=self.k-32



    


myapp = CivGame()
myapp.run()
